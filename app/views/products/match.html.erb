<% if @product %>
  <div class="row">

    <div class="col-md-3">
      <%= image_tag @product.image, class: "img-responsive" %>
    </div>
    <div class="col-md-3">
      <div class="row">
        <% @product.additional_images[0...4].each do |img| %>
          <div class="col-md-6"><%= image_tag img, class: "img-responsive" %></div>
        <% end %>
      </div>

    </div>

    <div class="col-md-4">
      <h3><%= link_to @product.title, match_path(product_id: @product.id) %></h3>
      <h3><em>Brand:</em> <%= @product.brand.name || 'N/A' %></h3>
      <h3><em>Color:</em> <%= @product.color || 'N/A' %></h3>
      <h3><em>Size:</em> <%= @product.size|| 'N/A' %></h3>
      <h3><em>Price:</em> <%= @product.price || 'N/A' %></h3>
      <h3><em>Sale:</em> <%= @product.price_sale || 'N/A' %></h3>

      <h5><em>Material:</em> <%= @product.material || 'N/A' %></h5>
      <h5><em>Bop Cat:</em> <%= @product.category %></h5>
      <h5><em>Goog Cat:</em> <%= @product.google_category %></h5>
      <h5><em>Style Code:</em> <%= @product.style_code %></h5>
      <h5><em>Shopbop Product:</em> <%= link_to 'link', @product.url, target: :_blank %></h5>
    </div>
    <div class="col-md-2">
      <div class="dropdown pull-right">
        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
        <%= @brand.name %>
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenu1">
          <% @brands_choose.each do |brand| %>
            <li><%= link_to brand.name, match_path(brand_id: brand.id) %></li>
          <% end %>
        </ul>
      </div>
      <div style="height: 2px; width: 1px; clear: both;">&nbsp;</div>
      <%= link_to 'Brand statistic', products_statistic_path(brand_id: @brand.id), class: 'btn btn-default pull-right', target: :_blank %>
      <div style="height: 2px; width: 1px; clear: both;">&nbsp;</div>
      <%= link_to 'Undo previous match', match_undo_path(brand_id: @brand.id), class: 'btn btn-default select-action pull-right', remote: true, method: :post %>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <div class="pull-right page-header" style='margin-top: 30px;' >
        <%= link_to 'No Color', select_path(product_id: @product.id, decision: 'no-color'), class: 'btn btn-danger select-action', remote: true, method: :post %>
        <%= link_to 'No Size', select_path(product_id: @product.id, decision: 'no-size'), class: 'btn btn-danger select-action', remote: true, method: :post %>
        <%= link_to 'Nothing', select_path(product_id: @product.id, decision: :nothing), class: 'btn btn-danger select-action', remote: true, method: :post %>
      </div>
      <h4 class="page-header">Select Matched Product:</h4>
    </div>
  </div>

  <% @suggested_products.in_groups_of(4, false) do |products| %>
    <div class="row">
      <% products.each do |suggested_product| %>
        <% product = suggested_product.suggested %>
        <div class="col-sm-3 col-xs-6" data-percentage="<%= suggested_product.percentage %>">
          <div class="thumbnail" style="background: <%= match_item_bg suggested_product %>" data-id="<%= product.id %>">
            <strong><%= product.title %></strong></br>
            <em>Color:</em> <%= product.color %></br>
            <em>Size:</em> <%= product.size %></br>
            <em>Price:</em> <%= product.price %><%= " (#{product.price_sale})" if product.price_sale.present? && product.price != product.price_sale %></br>
            <!--<em>Category:</em> <%= product.category %></br>-->
            <em>Source:</em> <%= product.source %><%= "(#{product.retailer})" if product.retailer.present? %></br>
            <em>UPC:</em> <%= product.upc %></br>

            <div style="margin: 5px 0;">
              <%= link_to image_tag(product_image(product.image), class: "img-responsive portfolio-item"), product.url, target: :_blank %>
            </div>

            <%= link_to 'Found', select_path(product_id: @product.id, selected_id: product.id, decision: :found), class: "btn btn-success select-action", remote: true, method: :post %>
            <%= link_to 'Similar', select_path(product_id: @product.id, selected_id: product.id, decision: :similar), class: "btn btn-warning select-action", remote: true, method: :post %>
          </div>
        </div>
      <% end %>
    </div>
    <br>
  <% end %>

<% else %>
  <div class="row">
    <div class="col-sm-8">
      <h3>There is no products for you</h3>
    </div>
    <div class="col-sm-4">
      <div class="dropdown pull-right">
        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
          <%= @brand.name %>
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenu1">
          <% @brands_choose.each do |brand| %>
            <li><%= link_to brand.name, match_path(brand_id: brand.id) %></li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>

<% end %>